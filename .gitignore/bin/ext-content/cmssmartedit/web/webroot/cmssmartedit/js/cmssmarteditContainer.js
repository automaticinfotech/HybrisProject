angular.module("cmssmarteditContainer",["experienceInterceptorModule","resourceLocationsModule","cmssmarteditContainerTemplates","featureServiceModule","componentMenuModule","editorModalServiceModule","genericEditorModule","eventServiceModule","cmsDragAndDropServiceModule","catalogDetailsModule","synchronizeCatalogModule","perspectiveServiceModule","pageListLinkModule","pageListControllerModule","clientPagedListModule","assetsServiceModule"]).config(["PAGE_LIST_PATH","$routeProvider",function(a,b){b.when(a,{templateUrl:"web/features/cmssmarteditContainer/pageList/pageListTemplate.html",controller:"pageListController",controllerAs:"pageListCtl"})}]).run(["$log","$rootScope","ComponentService","systemEventService","cmsDragAndDropService","catalogDetailsService","featureService","perspectiveService","assetsService",function(a,b,c,d,e,f,g,h,i){g.addToolbarItem({toolbarId:"experienceSelectorToolbar",key:"se.cms.componentMenuTemplate",nameI18nKey:"cms.toolbarItem.componentMenuTemplate.name",descriptionI18nKey:"cms.toolbarItem.componentMenuTemplate.description",type:"HYBRID_ACTION",callback:function(){d.sendSynchEvent("ySEComponentMenuOpen",{})},include:"web/features/cmssmarteditContainer/componentMenu/componentMenuTemplate.html"}),g.register({key:"se.cms.dragAndDrop",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){e.register()},disablingCallback:function(){e.unregister()}}),f.addItems([{include:"web/features/cmssmarteditContainer/pageList/pageListLinkTemplate.html"}]),f.addItems([{include:"web/features/cmssmarteditContainer/synchronize/catalogDetailsSyncTemplate.html"}]),h.register({key:"se.cms.perspective.basic",nameI18nKey:"se.cms.perspective.basic.name",descriptionI18nKey:"se,cms.perspective.basic.description",features:["se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.dragAndDrop","se.emptySlotFix"],perspectives:[]}),h.register({key:"se.cms.perspective.advanced",nameI18nKey:"se.cms.perspective.advanced.name",descriptionI18nKey:"se.cms.perspective.advanced.description",features:["se.slotContextualMenu","se.slotSharedButton","se.slotContextualMenuVisibility","se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.dragAndDrop","se.emptySlotFix"],perspectives:[]})}]),angular.module("componentItemModule",["assetsServiceModule"]).directive("componentItem",["$log","assetsService",function(a,b){return{templateUrl:"web/features/cmssmarteditContainer/componentMenu/componentItemTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{componentItem:"="},link:function(a,c,d){a.imageRoot=b.getAssetsRoot()}}}]),angular.module("componentMenuModule",["componentsModule","componentServiceModule","assetsServiceModule","cmsDragAndDropServiceModule"]).controller("ComponentMenuController",["$log","$timeout","ComponentService","cmsDragAndDropService",function(a,b,c,d){this.types={},c.loadComponentTypes().then(function(){angular.copy(c.listOfComponentTypes,this.types)}.bind(this)),this.loadComponentItems=function(a,b,d){return c.loadPagedComponentItems(a,b,d).then(function(a){return a.results=a.componentItems,delete a.componentItems,a})},this.preventDefault=function(a){a.stopPropagation()}}]).filter("nameFilter",function(){return function(a,b){var c=[];if(!b||b.length<3)return a;b=b.toLowerCase();var d=b.split(" ");return(a||[]).forEach(function(a){var b=!0,e=a.name.toLowerCase();d.forEach(function(a){return-1==e.indexOf(a)?(b=!1,!1):void 0}),b&&-1==c.indexOf(a)&&c.push(a)}),c}}).directive("componentMenu",["$rootScope","systemEventService","$q","$document","assetsService","cmsDragAndDropService","DRAG_AND_DROP_EVENTS",function(a,b,c,d,e,f,g){return{templateUrl:"web/features/cmssmarteditContainer/componentMenu/componentMenuWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(a,f,h){a.parentBtn=f.closest(".ySEHybridAction"),a.status={isopen:!1},a.icons={closed:".."+e.getAssetsRoot()+"/images/icon_add.png",open:".."+e.getAssetsRoot()+"/images/icon_add_s.png"},a.menuIcon=a.icons.closed,a.updateIcon=function(){a.status.isopen?(a.menuIcon=a.icons.open,a.parentBtn.addClass("ySEOpenComponent")):(a.menuIcon=a.icons.closed,a.parentBtn.removeClass("ySEOpenComponent"))},b.registerEventHandler("ySEComponentMenuClose",function(){return a.status.isopen=!1,c.when()}),a.$watch("status.isopen",a.updateIcon),a.preventDefault=function(a){a.stopPropagation()},d.on("click",function(b){$(b.target).parents(".ySEComponentMenuW").length<=0&&a.status.isopen&&(a.status.isopen=!1,a.$apply())}),b.registerEventHandler(g.DRAG_STARTED,function(){a.status.isopen=!1})}}}]),angular.module("componentSearchModule",[]).directive("componentSearch",["iframeClickDetectionService",function(a){return{templateUrl:"web/features/cmssmarteditContainer/componentMenu/componentSearchTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:!1,link:function(b,c,d){b.showResetButton=!1,b.selectSearch=function(a){a.stopPropagation()},b.preventDefault=function(a){a.stopPropagation()},b.closeComponentSearch=function(a){a&&(a.preventDefault(),a.stopPropagation()),b.status.isopen=!1},b.$watch("status.isopen",function(){b.status.isopen||(b.searchTerm="")}),b.$watch("searchTerm",function(){b.showResetButton=""!==b.searchTerm}),a.registerCallback("closeComponentSearch",function(){b.closeComponentSearch(),b.searchTerm=""})}}}]),angular.module("componentsModule",["cmssmarteditContainerTemplates","componentSearchModule","componentTypeModule","componentItemModule","eventServiceModule"]).directive("componentTabs",["$rootScope","systemEventService","$q",function(a,b,c){return{templateUrl:"web/features/cmssmarteditContainer/componentMenu/componentTabsTemplate.html",restrict:"E",transclude:!1,replace:!0,link:function(a,d,e){a.tabs=[{title:"compomentmenu.tabs.componenttypes",disabled:!1},{title:"compomentmenu.tabs.customizedcomp",disabled:!1}],a.selectTab=function(a){a.stopPropagation()},b.registerEventHandler("ySEComponentMenuOpen",function(){return a.searchTerm="",a.activateItemsTab(0),c.when()}),a.focusOnSearch=function(b){a.searchTerm&&a.searchTerm.length>1&&a.activateItemsTab(1)},a.resetSearch=function(b){b.stopPropagation(),a.activateItemsTab(0)},a.activateItemsTab=function(b){a.tabs[b].active=!0}}}}]),angular.module("componentTypeModule",[]).directive("componentType",["$log","domain",function(a,b){return{templateUrl:"web/features/cmssmarteditContainer/componentMenu/componentTypeTemplate.html",restrict:"E",transclude:!1,replace:!0,link:function(a,c,d){a.imageRoot=b+"/cmssmartedit"}}}]),angular.module("cmsDragAndDropServiceModule",["translationServiceModule","dragAndDropServiceModule","restServiceFactoryModule","componentServiceModule","editorModalServiceModule","eventServiceModule","renderServiceModule","alertServiceModule","removeComponentServiceModule","componentHandlerServiceModule"]).constant("DRAG_AND_DROP_EVENTS",{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED"}).factory("cmsDragAndDropService",["$rootScope","$log","$translate","dragAndDropService","restServiceFactory","parseQuery","hitch","ComponentService","editorModalService","systemEventService","renderService","alertService","removeComponentService","domain","componentHandlerService","CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r="se.cms.dragAndDrop",s=e.get(p),t=e.get(q+"?pageId=:pageId&slotId=:currentSlotId&componentId=:componentId","componentId"),u=function(a){return $(a)},v=function(a,b){return a.children()[b]},w=function(a,b){var c=a.getSelectorInIframe(b);c.removeClass("over-slot-enabled"),c.removeClass("over-slot-disabled"),c.removeClass("ySEemptySlot");var d=a.getSelectorInIframe(".ySEDirtyHeight");d.removeClass("ySEDirtyHeight"),d.height(0)},x=function(a,b,d){var e=d.data&&d.data.errors&&d.data.errors.length>0?d.data.errors[0].message:"";return c.instant("cmsdraganddrop.error",{sourceComponentId:a,targetSlotId:b,detailedError:e})},y=function(){var a=o.getAllSlotsSelector();d.register({id:r,sourceSelector:o.getAllComponentsSelector(),targetSelector:a,stopCallback:g(this,function(b,c,d){this._removeDynamicStyles(b,a),k.toggleOverlay(!0),k.renderPage(!0)},d),startCallback:g(this,function(a,b,c){k.toggleOverlay(!1),this.sourceSlotId=o.getId(this._getSelector(b.currentTarget)),j.sendSynchEvent("ySEComponentMenuClose",{})},d),overCallback:g(this,function(a,d,e){var f=this._getSelector(e.item,0);o.getSlotOperationRelatedType(f)||(f=this._getSelector(this._getElementChild(e.item,0)));var h=o.getSlotOperationRelatedType(f),i=o.getId(this._getSelector(d.target));s.get({pageUid:o.getPageUID(),slotUid:i}).then(g(this,function(b){var e,f=b.validComponentTypes.indexOf(h)>-1,g=this._getSelector(d.target);if(f){a.getSelectorInIframe(".ySEIconBckg").switchClass("ySEDnDImageRed","ySEDnDImageBlue"),e=c.instant("cmsdraganddrop.drophere");var i=g.children(this._getSelector("ySEDnDPlaceHolder"));g.addClass("over-slot-enabled"),i.attr("data-content",e)}else a.getSelectorInIframe(".ySEIconBckg").switchClass("ySEDnDImageBlue","ySEDnDImageRed"),e=c.instant("cmsdraganddrop.notallowed"),g.addClass("over-slot-disabled"),g.attr("data-content",e)}),function(){b.error("failed to retrieve slot details for slot ")})},d),dropCallback:g(this,function(a,b,d){var e=o.getSlotOperationRelatedId(this._getSelector(b.item)),f=o.getId(this._getSelector(a.target)),j=o.getSlotOperationRelatedType(this._getSelector(b.item));if(this._getSelector(a.target).hasClass("over-slot-disabled")){d();var n=c.instant("drag.and.drop.not.valid.component.type",{slotUID:f,componentUID:e});l.pushAlerts([{successful:!1,message:n,closeable:!0}])}else if(this._getSelector(a.target).hasClass("over-slot-enabled")){var p=this;void 0===this.sourceSlotId?void 0===e?h.addNewComponent("name",j,o.getPageUID(),f,b.item.index()).then(function(a){e=a.uid,o.setId(b.item,e),i.open(j,e).then(function(){},function(a){m.removeComponent({slotId:f,componentType:j,slotOperationRelatedId:e,componentId:e}).then(function(){},function(){var b=p._generateErrorMessage(e,f,a);l.pushAlerts([{successful:!1,message:b,closeable:!0}])}),d()})},function(a){var b=p._generateErrorMessage(e,f,a);l.pushAlerts([{successful:!1,message:b,closeable:!0}]),d()}):h.addExistingComponent(o.getPageUID(),e,f,b.item.index()).then(function(a){k.renderSlots(f)},function(a){var b=p._generateErrorMessage(e,f,a);l.pushAlerts([{successful:!1,message:b,closeable:!0}]),d()}):t.update({pageId:o.getPageUID(),currentSlotId:this.sourceSlotId,componentId:e,slotId:f,position:b.item.index()}).then(g(this,function(a){k.renderSlots([this.sourceSlotId,f])}),function(a){var b=void 0===a?c.instant("cmsdraganddrop.move.failed",{slotID:f,componentID:e}):p._generateErrorMessage(e,f,a);l.pushAlerts([{successful:!1,message:b,closeable:!0}]),d()})}else d()}),outCallback:g(this,function(a,b){this._getSelector(b.helper).removeClass("over-active"),this._getSelector(a.target).removeClass("over-slot-enabled"),this._getSelector(a.target).removeClass("over-slot-disabled")}),helper:function(a,b,c){return"<img class='ySEIconBckg' src='"+n+"/cmssmartedit/images/component_default.png'/>"}})},z=function(){d.unregister([r])};return{register:y,unregister:z,_getSelector:u,_getElementChild:v,_removeDynamicStyles:w,_generateErrorMessage:x}}]),angular.module("editorModalServiceModule",["modalServiceModule","gatewayProxyModule","coretemplates","editorTabsetModule","confirmationModalServiceModule"]).factory("editorModalService",["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","systemEventService","gatewayProxy","renderService","confirmationModalService","$q","$log",function(a,b,c,d,e,f,g,h,i){function j(){this.gatewayId="EditorModal",e.initForService(this,["open","openAndRerenderSlot"])}var k=function(d,e,f){return a.open({title:"type."+d.toLowerCase()+".name",titleSuffix:"editor.title.suffix",templateInline:'<editor-tabset control="modalController.tabsetControl" model="modalController.componentData"></editor-tabset>',controller:["editorModalService","modalManager","systemEventService","hitch","$scope","$log","$q",function(a,b,c,h,i,j,k){this.isDirty=!1,this.componentData={componentId:e,componentType:d},this.onSave=function(){return this.tabsetControl.saveTabs().then(function(a){return f(),a})},this.onCancel=function(){var a=k.defer();return this.isDirty?g.confirm({description:"editor.cancel.confirm"}).then(h(this,function(){this.tabsetControl.cancelTabs().then(function(){a.resolve()},function(){a.reject()})}),function(){a.reject()}):a.resolve(),a.promise},this.init=function(){b.setDismissCallback(h(this,this.onCancel)),b.setButtonHandler(h(this,function(a){switch(a){case"save":return this.onSave();case"cancel":return this.onCancel();default:j.error("A button callback has not been registered for button with id",a)}})),i.$watch(h(this,function(){var a=this.tabsetControl&&"function"==typeof this.tabsetControl.isDirty&&this.tabsetControl.isDirty();return a}),h(this,function(a){"boolean"==typeof a&&(a?(this.isDirty=!0,b.enableButton("save")):(this.isDirty=!1,b.disableButton("save")))}))}}],buttons:[{id:"cancel",label:"compoment.confirmation.modal.cancel",style:c.SECONDARY,action:b.DISMISS},{id:"save",label:"component.confirmation.modal.save",action:b.CLOSE,disabled:!0}]})};return j.prototype.open=function(a,b){return k(a,b,function(){f.renderComponent(b,a)})},j.prototype.openAndRerenderSlot=function(a,b,c){return k(a,b,function(){f.renderSlots(c)})},new j}]).run(["editorModalService",function(a){}]),function(){function a(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]==c)return d;return-1}var b="sm-editor-save",c="sm-editor-cancel",d="sm-editor-reset",e="sm-editor-is-dirty";angular.module("editorTabsetModule",["ui.bootstrap","functionsModule","experienceInterceptorModule","tabsetModule","eventServiceModule","cmssmarteditContainerTemplates","adminTabModule","basicTabModule","visibilityTabModule","genericTabModule"]).factory("editorTabsetService",["copy",function(b){var c=function(){this.tabsList=[],this.registerTab("genericTab","editortabset.generictab.title","web/features/cmssmarteditContainer/editorTabset/tabs/generic/genericTabTemplate.html"),this.registerTab("basicTab","editortabset.basictab.title","web/features/cmssmarteditContainer/editorTabset/tabs/basic/basicTabTemplate.html"),this.registerTab("adminTab","editortabset.admintab.title","web/features/cmssmarteditContainer/editorTabset/tabs/admin/adminTabTemplate.html"),this.registerTab("visibilityTab","editortabset.visibilitytab.title","web/features/cmssmarteditContainer/editorTabset/tabs/visibility/visibilityTabTemplate.html")};return c.prototype.registerTab=function(a,b,c){this._validateTab(a,b,c),this.tabsList.push({id:a,title:b,templateUrl:c,hasErrors:!1})},c.prototype._validateTab=function(a,b,c){if(!a)throw new Error("editorTabsetService.registerTab.invalidTabID");if(!b)throw new Error("editorTabsetService.registerTab.missingTabTitle");if(!c)throw new Error("editorTabsetService.registerTab.missingTemplateUrl")},c.prototype.deleteTab=function(b){var c=a(this.tabsList,"id",b);if(!(c>=0))throw new Error("editorTabsetService.deleteTab.tabNotFound");delete this.tabsList[c]},c.prototype.getTabsList=function(){return b(this.tabsList)},new c}]).directive("editorTabset",["$q","$log","systemEventService","editorTabsetService","merge",function(f,g,h,i,j){return{restrict:"E",transclude:!1,templateUrl:"web/features/cmssmarteditContainer/editorTabset/editorTabsetTemplate.html",scope:{control:"=",model:"="},link:function(k,l,m){var n=!1,o=function(){for(var a in k.tabsList)k.tabsList[a].hasErrors=!1};k.tabsList=i.getTabsList(),k.numTabsDisplayed=6,k.model.onStructureResolved=function(a,b){a&&b&&0===b.attributes.length&&(k.tabsList=i.getTabsList().filter(function(b){return b.id!==a}))},k.control={saveTabs:function(){var c={errorsList:[],item:{},operationSuccessful:!0},d=f.defer();return h.sendAsynchEvent(b,c).then(function(){o();for(var b in c.errorsList){var e=c.errorsList[b],f=a(k.tabsList,"id",e);f>=0&&(k.tabsList[f].hasErrors=!0)}c.operationSuccessful?d.resolve(c.item):d.reject()}),d.promise},resetTabs:function(){return h.sendAsynchEvent(d).then(function(){o()})},cancelTabs:function(){return h.sendAsynchEvent(c).then(function(){o()})},isDirty:function(){return n}};var p={},q=function(a,b){p[b.tabId]=b.isDirty;for(var c in p)if(p[c])return n=!0,f.when(!0);return n=!1,f.when(!0)};h.registerEventHandler("EDITOR_IN_ERROR_EVENT",function(b,c){var d=a(k.tabsList,"id",c);return d>=0&&(k.tabsList[d].hasErrors=!0),f.when()}),h.registerEventHandler(e,q),k.$on("$destroy",function(){h.unRegisterEventHandler(e,q)}),k.tabControl=function(a){var i=function(b,c){return f.when(function(){return a.onSave?a.onSave().then(function(a){c.item=j(c.item,a)},function(b){return b&&c.errorsList.push(a.tabId),c.operationSuccessful=!1,b}):void g.warn("Cannot save tab",a.tabId,". Save callback not defined.")}())},k=function(b,c){return f.when(function(){return a.onReset?a.onReset().then(function(a){return a},function(a){return a}):void g.warn("Cannot reset tab",a.tabId,". Reset callback not defined.")}())},l=function(b,c){return f.when(function(){return a.onCancel?a.onCancel().then(function(a){return a},function(a){return a}):void g.warn("Cannot cancel tab",a.tabId,". Cancel callback not defined.")}())};a.$watch(function(){return"function"==typeof a.isDirty&&a.isDirty()},function(b,c){"boolean"==typeof b&&b!==c&&h.sendAsynchEvent(e,{tabId:a.tabId,isDirty:b})}),h.registerEventHandler(b,i),h.registerEventHandler(d,k),h.registerEventHandler(c,l),a.$on("$destroy",function(){h.unRegisterEventHandler(b,i),h.unRegisterEventHandler(d,k),h.unRegisterEventHandler(c,l)})}}}}])}(),function(){angular.module("adminTabModule",["genericEditorModule","resourceLocationsModule"]).directive("adminTab",["$log","$q","ITEMS_RESOURCE_URI",function(a,b,c){return{restrict:"E",transclude:!1,templateUrl:"web/features/cmssmarteditContainer/editorTabset/tabs/tabInnerTemplate.html",scope:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",tabId:"="},link:function(a,b,d){a.tabStructure=[{cmsStructureType:"ShortString",qualifier:"uid",i18nKey:"type.cmsitem.uid.name",editable:!1},{cmsStructureType:"ShortString",qualifier:"pk",i18nKey:"type.item.pk.name",editable:!1}],a.contentApi=c}}}])}(),function(){angular.module("basicTabModule",["genericEditorModule","resourceLocationsModule"]).directive("basicTab",["$log","$q","ITEMS_RESOURCE_URI",function(a,b,c){return{restrict:"E",transclude:!1,templateUrl:"web/features/cmssmarteditContainer/editorTabset/tabs/tabInnerTemplate.html",scope:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",tabId:"="},link:function(a,b,d){a.tabStructure=[{cmsStructureType:"ShortString",qualifier:"name",i18nKey:"type.cmsitem.name.name",required:!0},{cmsStructureType:"Date",qualifier:"creationtime",i18nKey:"type.item.creationtime.name",editable:!1},{cmsStructureType:"Date",qualifier:"modifiedtime",i18nKey:"type.item.modifiedtime.name",editable:!1}],a.contentApi=c}}}])}(),function(){angular.module("genericTabModule",["genericEditorModule","resourceLocationsModule"]).directive("genericTab",["$log","$q","TYPES_RESOURCE_URI","ITEMS_RESOURCE_URI",function(a,b,c,d){return{restrict:"E",transclude:!1,templateUrl:"web/features/cmssmarteditContainer/editorTabset/tabs/generic/tabInnerTemplate.html",scope:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",onStructureResolved:"=",tabId:"="},link:function(a,b,e){a.structureApi=c+"/:smarteditComponentType",a.contentApi=d}}}])}(),function(){angular.module("visibilityTabModule",["genericEditorModule","resourceLocationsModule"]).directive("visibilityTab",["$log","$q","ITEMS_RESOURCE_URI",function(a,b,c){return{restrict:"E",transclude:!1,templateUrl:"web/features/cmssmarteditContainer/editorTabset/tabs/tabInnerTemplate.html",scope:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",tabId:"="},link:function(a,b,d){a.tabStructure=[{cmsStructureType:"Boolean",qualifier:"visible",prefixText:"visible.prefix.text",labelText:"visible.postfix.text"}],a.contentApi=c}}}])}(),angular.module("pageListControllerModule",["pageListServiceModule","functionsModule","resourceLocationsModule","addPageServiceModule","experienceServiceModule","eventServiceModule","resourceLocationsModule"]).controller("pageListController",["$scope","$routeParams","$location","STOREFRONT_PATH_WITH_PAGE_ID","hitch","pageListService","catalogService","addPageWizardService","experienceService","sharedDataService","systemEventService","LANDING_PAGE_PATH",function(a,b,c,d,e,f,g,h,i,j,k,l){this.siteUID=b.siteId,this.catalogId=b.catalogId,this.catalogVersion=b.catalogVersion,this.pages=[],this.catalogName="",this.query={value:""};var m=[];this.reloadPages=function(){f.getPageListForCatalog(this.siteUID,this.catalogId,this.catalogVersion).then(function(a){this.pages=a.pages.map(function(a){return{name:a.name,uid:a.uid,typeCode:a.typeCode,template:a.template}})}.bind(this))},this.reloadPages(),g.getCatalogsForSite(this.siteUID).then(function(a){m=a.filter(e(this,function(a){return a.catalogVersion===this.catalogVersion})),1==m.length&&(this.catalogName=m[0].name)}.bind(this)),this.renderers={name:function(a,b){return'<a data-ng-click="injectedContext.onLink( item.uid )">{{ item[key.property] }}</a>'}},this.injectedContext={onLink:function(a){if(a){var b=this._buildExperiencePath(a);c.path(b)}}.bind(this)},i.buildDefaultExperience(b).then(function(a){j.set("experience",a).then(function(a){k.sendAsynchEvent("experienceUpdate")},function(a){$log.error("the provided path could not be parsed: "+c.url()),$log.error(a),c.url(l)})}),this._buildExperiencePath=function(a){return d.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion).replace(":pageId",a)},this.openAddPageWizard=function(){h.openAddPageWizard().then(function(){this.reloadPages()}.bind(this))}}]),function(){angular.module("pageListLinkModule",[]).directive("pageListLink",function(){return{templateUrl:"web/features/cmssmarteditContainer/pageList/pageListLinkDirectiveTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(a,b,c){}}})}(),angular.module("pageListServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("pageListService",["PAGES_LIST_RESOURCE_URI","restServiceFactory","$q",function(a,b,c){var d=b.get(a);return{getPageListForCatalog:function(a,b,c){return d.get({siteUID:a,catalogId:b,catalogVersion:c}).then(function(a){return a})}}}]),function(){angular.module("addPageServiceModule",["wizardServiceModule","pageTypeServiceModule","pageTemplateServiceModule","languageServiceModule","addPageInfoDirectiveModule","createPageServiceModule"]).constant("BASE_PAGE_INFO_FIELDS",[{cmsStructureType:"ShortString",qualifier:"name",i18nKey:"se.cms.pageinfoform.name",required:!0},{cmsStructureType:"ShortString",qualifier:"title",i18nKey:"se.cms.pageinfoform.title",localized:!0,required:!0},{cmsStructureType:"ShortString",qualifier:"uid",i18nKey:"se.cms.pageinfoform.id"}]).value("PAGE_INFO_FIELDS_MAP",{EmailPage:[{cmsStructureType:"ShortString",qualifier:"fromEmail",i18nKey:"se.cms.pageinfoform.fromemail"},{cmsStructureType:"ShortString",qualifier:"fromName",i18nKey:"se.cms.pageinfoform.fromname"}],ContentPage:[{cmsStructureType:"ShortString",qualifier:"label",i18nKey:"se.cms.pageinfoform.label"}]}).factory("addPageWizardService",["modalWizard","BASE_PAGE_INFO_FIELDS","PAGE_INFO_FIELDS_MAP",function(a,b,c){return{openAddPageWizard:function(){return a.open({controller:"addPageWizardController",controllerAs:"addPageWizardCtl"})},getPageTypeFields:function(a){var d=b,e=c[a]?c[a]:[];return d.concat(e)}}}]).controller("addPageWizardController",["$q","$routeParams","hitch","pageTypeService","pageTemplateService","languageService","addPageWizardService","createPageService",function(a,b,c,d,e,f,g,h){var i={PAGE_TYPE:"pageType",PAGE_TEMPLATE:"pageTemplate",PAGE_INFO:"pageInfo"},j="en";this.model={},this.siteUID=b.siteId,this.catalogId=b.catalogId,this.catalogVersion=b.catalogVersion,this.getWizardConfig=c(this,function(){var a={isFormValid:c(this,this.isFormValid),onNext:c(this,this.onNext),onDone:c(this,this.onDone),steps:[{id:i.PAGE_TYPE,name:"se.cms.addpagewizard.pagetype.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageTypeStepTemplate.html",actions:[]},{id:i.PAGE_TEMPLATE,name:"se.cms.addpagewizard.pagetemplate.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageTemplateStepTemplate.html",actions:[]},{id:i.PAGE_INFO,name:"se.cms.addpagewizard.pageinfo.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageInfoStepTemplate.html",actions:[]}]};return a}),this.isFormValid=function(a){var b=!1;switch(a){case i.PAGE_TYPE:b=this.model.selectedType&&this.model.selectedType.isSelected;break;case i.PAGE_TEMPLATE:b=this.model.selectedTemplate&&this.model.selectedTemplate.isSelected;break;case i.PAGE_INFO:b=this.model.editor&&this.model.editor.isDirty()===!0}return b},this.onNext=function(b){var c;switch(b){case i.PAGE_TYPE:this.model.selectedType&&this.model.selectedType.isSelected&&(c=this.getPageTemplates(this.model.selectedType.code));break;case i.PAGE_TEMPLATE:if(this.model.selectedTemplate&&this.model.selectedTemplate.isSelected){var d=this.model.selectedType.code;this.model.pageInfoStructure=g.getPageTypeFields(d),c=a.when(!0)}break;default:c=a.when(!1)}return c},this.onDone=function(){return a.when(this.model.editor.submit(this.model.componentForm))},this.createPage=function(){var a=this.model.editor.component;return a.type=this.model.selectedType.type,a.typeCode=this.model.selectedType.code,a.template=this.model.selectedTemplate.uid,a.defaultPage=!1,h.createPage(this.siteUID,this.catalogId,this.catalogVersion,a).then(c(this,function(a){return{payload:this.model.editor.component,response:a}}))},d.getPageTypeIDs().then(c(this,function(a){this.model.pageTypes=a,this.model.selectedType=null})),this.selectType=function(a){this.model.selectedType&&(this.model.selectedType.isSelected=!1),a.isSelected=!0,this.model.selectedType=a},this.getPageTemplates=function(b){return e.getPageTemplatesForType(this.siteUID,this.catalogId,this.catalogVersion,b).then(c(this,function(b){return this.model.selectedTemplate=null,this.model.pageTemplates=b.templates,a.when(!0)}))},this.selectTemplate=function(a){this.model.selectedTemplate&&(this.model.selectedTemplate.isSelected=!1),a.isSelected=!0,this.model.selectedTemplate=a},this.model.toolingLanguage=j,f.getResolveLocale().then(c(this,function(a){this.model.toolingLanguage=a})),this.getLocalizedValue=function(a){var b="";if(a[this.model.toolingLanguage])b=a[this.model.toolingLanguage];else{var c=this.model.toolingLanguage.substring(0,2);for(var d in a)if(0===d.indexOf(c)){b=a[d];break}}return b}}])}(),function(){angular.module("addPageInfoDirectiveModule",["genericEditorModule"]).directive("pageInfoForm",["GenericEditor",function(a){return{templateUrl:"web/common/services/genericEditor/genericEditorTemplate.html",restrict:"E",transclude:!0,scope:{page:"=",structure:"=",sharedData:"=",onSubmit:"&"},link:function(b){b.editor=new a({structureApi:null,smarteditComponentType:"",structure:b.structure,onSubmit:b.onSubmit,content:b.page}),b.sharedData.editor=b.editor,b.sharedData.componentForm=b.componentForm,b.editor.init()}}}])}(),function(){angular.module("createPageServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("createPageService",["restServiceFactory","PAGES_LIST_RESOURCE_URI",function(a,b){var c=a.get(b);return{createPage:function(a,b,d,e){var f=e;return f.siteUID=a,f.catalogId=b,f.catalogVersion=d,c.save(f)}}}])}(),function(){angular.module("pageTemplateServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).constant("NON_SUPPORTED_TEMPLATES",["layout/landingLayout1Page","layout/landingLayout3Page","layout/landingLayout4Page","layout/landingLayout5Page","layout/landingLayout6Page","layout/landingLayoutPage","account/accountRegisterPage","checkout/checkoutRegisterPage"]).factory("pageTemplateService",["restServiceFactory","PAGE_TEMPLATES_URI","NON_SUPPORTED_TEMPLATES",function(a,b,c){var d=a.get(b);return{getPageTemplatesForType:function(a,b,e,f){return d.get({siteUID:a,catalogId:b,catalogVersion:e,pageTypeCode:f,active:!0}).then(function(a){return{templates:a.templates.filter(function(a){return-1===c.indexOf(a.frontEndName)})}})}}}])}(),angular.module("pageTypeServiceModule",["functionsModule","languageServiceModule"]).service("pageTypeService",["$q","hitch","languageService",function(a,b,c){var d=function(){this.localizeField=function(a,b){var c={};return b.forEach(function(b){c[b.isoCode]=a}),c},this.getPageTypeIDs=function(){return c.getToolingLanguages().then(b(this,function(b){var c=[{code:"ContentPage",type:"contentPageData",name:this.localizeField("cms.pagetype.contentpage.name",b),description:this.localizeField("cms.pagetype.contentpage.description",b)}];return a.when(c)}))}};return new d}]),angular.module("removeComponentServiceModule",["removeComponentServiceInterfaceModule","gatewayProxyModule"]).factory("removeComponentService",["$q","$log","extend","gatewayProxy","RemoveComponentServiceInterface",function(a,b,c,d,e){var f="RemoveComponent",g=function(a){this.gatewayId=a,d.initForService(this,["removeComponent"])};return new(g=c(e,g))(f)}]),angular.module("synchronizationServiceModule",["restServiceFactoryModule","resourceLocationsModule","alertServiceModule","authenticationModule"]).service("synchronizationService",["restServiceFactory","$interval","$q","$translate","alertService","SYNC_PATH","authenticationService",function(a,b,c,d,e,f,g){var h=5e3,i=a.get(f,"catalog"),j={};this.updateCatalogSync=function(a){return i.update({catalog:a.catalogId}).then(function(a){return a}.bind(this),function(b){var c=d.instant("sync.running.error.msg",{catalogName:a.name});return"Conflict"===b.statusText&&e.pushAlerts([{successful:!1,message:c,closeable:!0}]),!1}.bind(this))},this.getCatalogSyncStatus=function(a){return i.get({catalog:a.catalogId})},this.startAutoGetSyncData=function(a,c){j[a.catalogId]=b(function(){var b=f.replace(":catalog",a.catalogId);g.isAuthenticated(b).then(function(b){b||this.stopAutoGetSyncData(a),this.getCatalogSyncStatus(a).then(c).then(function(b){j[a.catalogId]||this.startAutoGetSyncData(a,c)}.bind(this))}.bind(this))}.bind(this),h)},this.stopAutoGetSyncData=function(a){j[a.catalogId]&&(b.cancel(j[a.catalogId]),j[a.catalogId]=void 0)}}]),angular.module("synchronizeCatalogModule",["confirmationModalServiceModule","synchronizationServiceModule","l10nModule"]).controller("synchronizeCatalogController",["$scope","synchronizationService","$q","confirmationModalService","l10nFilter",function(a,b,c,d,e){this.syncInitiatedFlag=!1,this.syncData={showSyncBtn:!1,lastSyncTS:"",startSyncTS:"",showFailure:!1};var f=function(a){this.syncInitiatedFlag="RUNNING"==a.syncStatus||"UNKNOWN"==a.syncResult?!0:!1,this.syncData={showSyncBtn:"RUNNING"==a.syncStatus||"UNKNOWN"==a.syncResult?!1:!0,lastSyncTS:a.endDate,startSyncTS:a.creationDate?a.creationDate:"NEVER",showFailure:"ERROR"==a.syncResult||"FAILURE"==a.syncResult?!0:!1}}.bind(this),g=function(){b.getCatalogSyncStatus(this.catalog).then(function(a){f(a)}.bind(this))}.bind(this),h=function(){a.$on("$destroy",function(){b.stopAutoGetSyncData(this.catalog)}.bind(this))}.bind(this);this.syncCatalog=function(){var a=e(this.catalog.name);d.confirm({description:"sync.confirm.msg",title:"sync.confirmation.title",descriptionPlaceholders:{catalogName:a}}).then(function(){
b.updateCatalogSync(this.catalog).then(function(a){f(a)})}.bind(this))},b.startAutoGetSyncData(this.catalog,f),h(),g()}]).directive("synchronizeCatalog",function(){return{templateUrl:"web/features/cmssmarteditContainer/synchronize/synchronizationTemplate.html",restrict:"E",controller:"synchronizeCatalogController",controllerAs:"ctrl",scope:{},bindToController:{catalog:"="}}}),angular.module("cmssmarteditContainerTemplates",[]).run(["$templateCache",function(a){"use strict";a.put("web/features/cmssmarteditContainer/componentMenu/componentItemTemplate.html",'<div class="ySEComponentItem col-xs-6">\n\n	<div class="smartEditComponent" data-smartedit-component-id="{{componentItem.uid}}" data-smartedit-component-type="{{componentItem.typeCode}}">\n		<img data-ng-src="{{imageRoot}}/images/component_default.png" class=" " alt="{{componentItem.name}}" />\n	</div>\n	<div class="ySECustomCompTitle" title="{{componentItem.name}} - {{componentItem.typeCode}}">\n		<div class="ySECustCompName" >{{componentItem.name}}</div>\n		<div class="ySECustCompType" >{{componentItem.typeCode}}</div>\n		<img data-ng-if="!componentItem.visible" class="ySEComponentVisibility" ng-src="{{imageRoot}}/images/icon_visibility.png" >\n	</div>\n\n</div>\n'),a.put("web/features/cmssmarteditContainer/componentMenu/componentItemWrapperTemplate.html",'<component-item data-component-item="item"></component-item>'),a.put("web/features/cmssmarteditContainer/componentMenu/componentMenuTemplate.html","<component-menu></component-menu>"),a.put("web/features/cmssmarteditContainer/componentMenu/componentMenuWidgetTemplate.html",'<div dropdown is-open="status.isopen" auto-close="disabled" class="ySEComponentMenuW">\n    <button type="button" class="btn btn-default yHybridAction ySEComponentMenuW--button" dropdown-toggle ng-disabled="disabled " aria-pressed="false">\n        <img data-ng-src="{{imageRoot}}{{menuIcon}}"/>\n        <span class="ySEComponentMenuW--button--txt">{{\'componentmenu.btn.label.addcomponent\' | translate}}</span>\n    </button>\n    <ul class="dropdown-menu dropdown-menu-left btn-block ySEComponentMenu" role="menu" ng-click="preventDefault($event);" >\n        <li role="menuitem " class="item ">\n            <component-search></component-search>\n        </li>\n        <li class="divider "></li>\n        <li role="menuitem " class="item ">\n            <component-tabs></component-tabs>\n        </li>\n    </ul>\n</div>'),a.put("web/features/cmssmarteditContainer/componentMenu/componentSearchTemplate.html",'<div class="input-group ySEComponentSearch">\n    <span class="input-group-addon glyphicon glyphicon-search ySESearchIcon" ng-click="preventDefault($event); "></span>\n    <input type="text" class="form-control ySECompSearchField" name="srch-term" ng-model="searchTerm" ng-keypress="focusOnSearch($event);" ng-click="selectSearch($event); " placeholder="{{\'componentmenu.search.placeholder\' | translate}}">\n    <span data-ng-show="showResetButton" class="input-group-addon glyphicon glyphicon-remove-sign ySESearchIcon" ng-click="resetSearch($event); searchTerm=\'\';"></span>\n</div>'),a.put("web/features/cmssmarteditContainer/componentMenu/componentTabsTemplate.html",'<div class="ySEComponentsResult" ng-controller="ComponentMenuController as menuCtrl">\n    <tabset>\n        <tab class="ySEComTypeTab" heading="{{tabs[0].title | translate}}" active="tabs[0].active" disable="{{tabs[0].disabled}}" ng-click="activateItemsTab(0); selectTab($event); ">\n            <div class="ySEComponents yFixed">\n                <component-type ng-repeat="componentType in menuCtrl.types.componentTypes | nameFilter:searchTerm track by $id(componentType) "></component-type>\n            </div>\n        </tab>\n        <tab class="ySEComTypeTab" heading="{{tabs[1].title | translate}}" active="tabs[1].active" disable="{{tabs[1].disabled}}" ng-click="activateItemsTab(1); selectTab($event); ">\n            <y-infinite-scrolling data-ng-if="tabs[1].active"\n                data-drop-down-class="ySEComponents"\n                data-page-size="10"\n                data-mask="searchTerm"\n                data-fetch-page="menuCtrl.loadComponentItems"\n                data-context="menuCtrl">\n                <div data-ng-repeat="item in menuCtrl.items">\n                    <component-item data-component-item="item"></component-item>\n                </div>\n            </y-infinite-scrolling>\n        </tab>\n    </tabset>\n\n    <span class="label ySEBottomLabel">{{\'componentmenu.label.draganddrop\' | translate}}</span>\n</div>'),a.put("web/features/cmssmarteditContainer/componentMenu/componentTypeTemplate.html",'<div class="ySEComponentItem col-xs-6">\n	<div class="smartEditComponent" data-smartedit-component-type="{{componentType.code}}">\n		<img data-ng-src="{{imageRoot}}/images/component_default.png" class=" " alt="{{componentItem.name}}" />\n	</div>\n	<div class="ySECustomCompTitle ySECompTypeTitle">\n		<div class="ySECustCompType" title="{{componentType.name}}">{{componentType.name}}</div>\n	</div>\n\n</div>'),a.put("web/features/cmssmarteditContainer/editorTabset/editorTabsetTemplate.html",'<y-tabset \n		data-model="model" \n		tabs-list="tabsList" \n		data-num-tabs-displayed="{{numTabsDisplayed}}" \n		tab-control="tabControl">\n</y-tabset>'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/admin/adminTabTemplate.html",'<admin-tab \n		class=\'sm-tab-content\' \n		save-tab=\'onSave\' \n		reset-tab=\'onReset\' \n		cancel-tab="onCancel" \n		is-dirty-tab="isDirty" \n		data-tab-id="tabId" \n		component-id="model.componentId" \n		component-type="model.componentType">\n</admin-tab>\n'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/basic/basicTabTemplate.html",'<basic-tab \n		class=\'sm-tab-content\' \n		save-tab=\'onSave\' \n		reset-tab=\'onReset\' \n		cancel-tab="onCancel" \n		is-dirty-tab="isDirty" \n		data-tab-id="tabId" \n		component-id="model.componentId" \n		component-type="model.componentType">\n</basic-tab>\n'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/generic/genericTabTemplate.html",'<generic-tab \n		class=\'sm-tab-content\' \n		save-tab=\'onSave\' \n		reset-tab=\'onReset\' \n		cancel-tab="onCancel" \n		is-dirty-tab="isDirty" \n		data-tab-id="tabId" \n		data-on-structure-resolved="model.onStructureResolved" \n		component-id="model.componentId" \n		component-type="model.componentType">\n</generic-tab>\n'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/generic/tabInnerTemplate.html",'<generic-editor \n		data-id="tabId" \n		data-smartedit-component-id="componentId" \n		data-smartedit-component-type="componentType" \n		data-structure-api="structureApi" \n		data-content-api="contentApi" \n		data-submit="saveTab" \n		data-reset="resetTab" \n		data-is-dirty="isDirtyTab" \n		data-on-structure-resolved="onStructureResolved">\n</generic-editor>\n'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/tabInnerTemplate.html",'<generic-editor \n		data-id="tabId" \n		data-smartedit-component-id="componentId" \n		data-smartedit-component-type="componentType" \n		data-structure="tabStructure" \n		data-content-api="contentApi" \n		data-submit="saveTab" \n		data-reset="resetTab" \n		data-is-dirty="isDirtyTab">\n</generic-editor>\n'),a.put("web/features/cmssmarteditContainer/editorTabset/tabs/visibility/visibilityTabTemplate.html",'<visibility-tab \n		class=\'sm-tab-content\' \n		save-tab=\'onSave\' \n		reset-tab=\'onReset\' \n		cancel-tab="onCancel" \n		is-dirty-tab="isDirty" \n		data-tab-id="tabId" \n		component-id="model.componentId" \n		component-type="model.componentType">\n</visibility-tab>'),a.put("web/features/cmssmarteditContainer/pageList/pageListLinkDirectiveTemplate.html",'<div class="page-list-link-container">\n    <div data-ng-repeat="catalogVersion in catalog.catalogVersions" class="col-xs-6 page-list-link-item">\n        <a data-ng-href="#/pages/{{catalogVersion.siteDescriptor.uid}}/{{catalogVersion.catalogId}}/{{catalogVersion.catalogVersion}}" data-translate="cataloginfo.pagelist"></a>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <hr class="ySECatalogDivider" />\n    </div>\n</div>\n\n'),a.put("web/features/cmssmarteditContainer/pageList/pageListLinkTemplate.html","<page-list-link></page-list-link>"),a.put("web/features/cmssmarteditContainer/pageList/pageListTemplate.html",'<div class="ySmartEditToolbars" style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar" data-image-root="imageRoot" data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n</div>\n<div ng-class="{\'alert-overlay\': true, \'ySEEmptyMessage\': (!alerts || alerts.length == 0 ) }">\n    <alerts-box alerts="alerts" />\n</div>\n<div class="pageListWrapper">\n    <div class="ySEPageListTitle">\n        <h1 class="ySEPage-list-title" data-translate=\'pagelist.title\'></h1>\n        <h4 class="ySEPage-list-label">{{pageListCtl.catalogName | l10n}} - {{pageListCtl.catalogVersion}}</h4>\n    </div>\n\n    <div class="ySEPage-list-search input-group">\n        <span class="input-group-addon glyphicon glyphicon-search ySEPage-list-search-icon" ng-click="preventDefault($event); "></span>\n        <input type="text" class="form-control ySEPage-list-search-input" placeholder="{{ \'pagelist.searchplaceholder\' | translate }}" data-ng-model="pageListCtl.query.value" name="query">\n    </div>\n\n    <div class="ySEAdd-Page-button">\n        <button class="" data-ng-click="pageListCtl.openAddPageWizard()">\n            <img data-ng-src="../cmssmartedit/images/icon_add.png" />\n            <span class="">{{\'se.cms.addpagewizard.addpage\' | translate}}</span>\n        </button>\n    </div>\n\n    <client-paged-list items="pageListCtl.pages"\n                keys="[{\n                    property:\'name\',\n                    i18n:\'pagelist.headerpagename\'\n                    },{\n                    property:\'uid\',\n                    i18n:\'pagelist.headerpageid\'\n                    },{\n                    property:\'typeCode\',\n                    i18n:\'pagelist.headerpagetype\'\n                    },{\n                    property:\'template\',\n                    i18n:\'pagelist.headerpagetemplate\'\n                    }]"\n                renderers="pageListCtl.renderers"\n                injected-context="pageListCtl.injectedContext"\n                sort-by="\'name\'"\n                reversed="false"\n                items-per-page="10"\n                query="pageListCtl.query.value"\n                display-count="true"\n    ></client-paged-list>\n</div>\n'),a.put("web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageInfoStepTemplate.html",'<page-info-form data-page="addPageWizardCtl.model.page" data-structure="addPageWizardCtl.model.pageInfoStructure" data-shared-data="addPageWizardCtl.model" data-on-submit="addPageWizardCtl.createPage()"></page-info-form>'),a.put("web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageTemplateStepTemplate.html",'<div class="page-type-step-template">\n\n    <div class="page-wizard-list">\n        <div data-ng-repeat="template in addPageWizardCtl.model.pageTemplates" data-ng-class="{ \'page-type-step-template__item__selected\': template.isSelected}" class="page-type-step-template__item" data-ng-click="addPageWizardCtl.selectTemplate(template)">\n            <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n            <div class="page-type-step-template__item--info">\n                <div class="page-type-step-template__item--info__title">{{template.name}}</div>\n                <div class="page-type-step-template__item--info__description"></div>\n        \n            </div>\n\n        </div>\n    </div>\n\n</div>'),a.put("web/features/cmssmarteditContainer/pageManagement/addPageWizard/templates/pageTypeStepTemplate.html",'<div class="page-type-step-template">\n\n    <div class="page-type-step-template__text ySEText">{{\'se.cms.addpagewizard.pagetype.description\' | translate}}</div>\n    <div data-ng-repeat="pageType in addPageWizardCtl.model.pageTypes" data-ng-class="{ \'page-type-step-template__item__selected\': pageType.isSelected}" class="page-type-step-template__item" data-ng-click="addPageWizardCtl.selectType(pageType)">\n        <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n        \n        <div class="page-type-step-template__item--info">\n            <!--\n                NOTE: The last translate is only needed while the temporary pageTypeService is used.\n                This should be removed when migrating to the backend service.\n            -->\n            <div class="page-type-step-template__item--info__title">{{addPageWizardCtl.getLocalizedValue(pageType.name) | translate}}</div>\n            <div class="page-type-step-template__item--info__description">{{addPageWizardCtl.getLocalizedValue(pageType.description) | translate}}</div>\n        </div>\n    </div>\n</div>'),a.put("web/features/cmssmarteditContainer/synchronize/catalogDetailsSyncTemplate.html",'<synchronize-catalog data-catalog="catalog"></synchronize-catalog>\n'),a.put("web/features/cmssmarteditContainer/synchronize/synchronizationTemplate.html",'<div>\n	<div class="ySECatalogStatus col-xs-8">\n		<div>\n			<label class="ySELastSync" data-ng-if="!ctrl.syncInitiatedFlag" data-translate="cataloginfo.lastsynced" ></label>\n			<label class="ySELastSync" data-ng-if="ctrl.syncInitiatedFlag" data-translate="cataloginfo.sync.initiated"></label>\n			<span class="catalog-last-synced" data-ng-if="ctrl.syncInitiatedFlag">{{ctrl.syncData.startSyncTS| date:\'short\'}}</span>\n			<span class="catalog-last-synced" data-ng-if="!ctrl.syncInitiatedFlag">{{ctrl.syncData.lastSyncTS| date:\'short\'}}</span>\n			<span data-ng-if="ctrl.syncData.showFailure" class="label-error" data-translate="sync.status.synced.syncfailed"></span>\n		</div>\n	</div>\n	<div class="ySECatalogSync col-xs-4 pull-right ">\n		<button data-ng-if="ctrl.syncData.showSyncBtn" class="btn btn-default catalog-sync-btn pull-right" data-ng-click="ctrl.syncCatalog()">{{ \'cataloginfo.btn.sync\' | translate}}</button>\n		<label class="ySESyncProgress pull-right" data-ng-if="!ctrl.syncData.showSyncBtn" data-translate="sync.status.synced.inprogress"></label>\n	</div>\n</div>\n')}]),angular.module("assetsServiceModule",[]).constant("testAssets",!1).factory("assetsService",["testAssets",function(a){return{getAssetsRoot:function(){return a?"/web/webroot":"/cmssmartedit"}}}]),angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function a(){}return a.prototype.removeComponent=function(a,b){},a}),function(){angular.module("resourceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI",function(a,b){return a.get(b)}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(a,b){return a.get(b)}])}(),function(){var a="CURRENT_CONTEXT_CATALOG",b="CURRENT_CONTEXT_CATALOG_VERSION",c="CURRENT_CONTEXT_SITE_ID";angular.module("resourceLocationsModule").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("ITEMS_RESOURCE_URI","/cmswebservices/v1/sites/"+c+"/catalogs/"+a+"/versions/"+b+"/items").constant("PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","/cmswebservices/v1/sites/"+c+"/catalogs/"+a+"/versions/"+b+"/pagescontentslotscomponents").constant("CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","/cmswebservices/v1/catalogs/"+a+"/versions/"+b+"/pages/:pageUid/contentslots/:slotUid/typerestrictions").constant("PAGES_LIST_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pages").constant("PAGE_LIST_PATH","/pages/:siteId/:catalogId/:catalogVersion").constant("PAGES_CONTENT_SLOT_RESOURCE_URI","/cmswebservices/v1/sites/"+c+"/catalogs/"+a+"/versions/"+b+"/pagescontentslots").constant("PAGE_TEMPLATES_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagetemplates")}(),angular.module("componentServiceModule",["restServiceFactoryModule","functionsModule","resourceLocationsModule"]).factory("ComponentService",["restServiceFactory","hitch","$q","$log","parseQuery","TYPES_RESOURCE_URI","ITEMS_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(a,b,c,d,e,f,g,h){var i=a.get(f),j=a.get(g),k=a.get(g),l=a.get(h),m=!1,n=!1,o={},p={},q={},r=function(a,b,d,e,f){var g=c.defer();return q.name=a,q.slotId=e,q.pageId=d,q.position=f,q.typeCode=b,k.save(q).then(function(a){g.resolve(a)},function(a){g.reject(a)}),g.promise},s=function(a,b,d,e){var f=c.defer();return q.pageId=a,q.slotId=d,q.componentId=b,q.position=e,l.save(q).then(function(a){f.resolve()},function(a){f.reject(a)}),f.promise},t=function(){var a=c.defer();return i.get().then(function(b){return angular.copy(b,o),a.resolve(o),m=!0,a.promise},function(){return m=!1,a.reject(),a.promise}),a.promise},u=function(a){return j.getById(a)},v=function(){var a=c.defer();return j.get().then(function(b){angular.copy(b,p),a.resolve(p),n=!0},function(){n=!1,a.reject()}),a.promise},w=function(a,b,c){return j.get({pageSize:b,currentPage:c,mask:a,sort:"name"})};return{loadComponentTypes:t,listOfComponentTypes:o,loadComponentItem:u,loadComponentItems:v,loadPagedComponentItems:w,listOfComponentItems:p,addNewComponent:r,addExistingComponent:s}}]);